package Controller;

import java.sql.Connection;
import java.sql.DriverManager;

import org.apache.ibatis.session.SqlSession;
import org.apache.ibatis.session.SqlSessionFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;

import lombok.RequiredArgsConstructor;

@Controller
@RequiredArgsConstructor
public class MainController {
    private final SqlSessionFactory sqlSessionFactory;
	

    @RequestMapping("/main.do")
    public String main() {
    	System.out.println("main");
    	try (SqlSession session = sqlSessionFactory.openSession()) {
            // 매퍼 인터페이스 사용 예시
            // UserMapper mapper = session.getMapper(UserMapper.class);
            // List<User> users = mapper.getAllUsers();
            
            // 또는 직접 쿼리 실행
            Integer result = session.selectOne("namespace.selectTest");
            System.out.println("MyBatis 쿼리 결과: " + result);
            
        } catch (Exception e) {
            System.out.println("MyBatis 실행 실패: " + e.getMessage());
        }
    	
        return "main";
    }
}
